<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>credit card gasp pattern</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <style>
    body, input, button {
      font-family: 'Roboto', sans-serif;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }
    header {
      padding: 1rem;
      border-bottom: 1px solid #ebeff0;
      margin-bottom: 1rem;
    }
    h1 {
      margin: 0;

    }

    p {
      font-size: smaller;
      letter-spacing: 0.25em;
    }
    fieldset {
      border: 0;
      margin: 0;
      padding: 1rem;
      background-color: silver;
      border-radius: 5px 5px 0 0;
      max-width: 320px;
      box-sizing: border-box;
    }

    input {
      padding: 1rem;
      font-size: 1rem;
      width: 100%;
      box-sizing: border-box;
      border: 0;
    }
    footer {
      max-width: 320px;
      display: flex;
      justify-content: space-between;
    }

    button {
      margin: 0;
      padding: 0.5rem 1rem;
      border: 0;
      width: 150px;
      box-sizing: border-box;
      background-color: gray;
      color: #fff;
      font-size: 0.9rem;
      border-radius: 0 0 5px 5px;
    }

  </style>
</head>
<body>
  <header>
    <h1>Credit card</h1>
    <p>gasp pattern demo</p>
  </header>

  <fieldset>
    <input type="text" value="4111111111111111">
  </fieldset>

  <footer>
    <button type="button" onclick="setUnionpay()">click set unionpay</button>
    <button type="button" onclick="setAmex()">click set amex</button>
  </footer>


  <script src="restricted-input.js"></script>
  <script src="credit-card-gaps-pattern.js"></script>
  <script>
    const element = document.querySelector('input');
    const data = {
      unionpay: {
        value: '4111111111111111',
        gaps: [4, 8, 12],
        lengths: [16, 17, 18, 19]
      },
      amex: {
        value: '378282246310005',
        gaps: [4, 10],
        lengths: [15]
      }
    }

    const formattedCreditCardInput = new RestrictedInput({
      element,
      pattern: creditCardGapsPattern(data.unionpay.gaps, data.unionpay.lengths)
    });

    formattedCreditCardInput.setPattern(creditCardGapsPattern(data.unionpay.gaps, data.unionpay.lengths));

    function setUnionpay() {
      element.value = data.unionpay.value;
      formattedCreditCardInput.setPattern(creditCardGapsPattern(data.unionpay.gaps, data.unionpay.lengths));
    }

    function setAmex() {
      element.value = data.amex.value;
      formattedCreditCardInput.setPattern(creditCardGapsPattern(data.amex.gaps, data.amex.lengths));
    }
  </script>
</body>
</html>
